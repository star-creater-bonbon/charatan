<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚­ãƒ£ãƒ©ãŸã‚“ï¼â€•â€•èª•ç”Ÿæ—¥è¨ºæ–­â€•â€•</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&display=swap" rel="stylesheet">

<!-- OGPè¨­å®šï¼šXã§ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰è¡¨ç¤º -->
<meta property="og:title" content="ã‚­ãƒ£ãƒ©ãŸã‚“ï¼â€•â€•ã‚ãªãŸã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®èª•ç”Ÿæ—¥è¨ºæ–­">
<meta property="og:description" content="æ€§æ ¼ã‹ã‚‰ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®èª•ç”Ÿæ—¥ã¨æ˜Ÿåº§ã‚’å°ãå‡ºã™é­”æ³•ã®ãƒ„ãƒ¼ãƒ«ï¼">
<meta property="og:image" content="https://charatan.example.com/og-image.png">
<meta property="og:url" content="https://charatan.example.com">
<meta name="twitter:card" content="summary_large_image">

<style>
/* --- åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« --- */
body {
  background: linear-gradient(135deg, #2e1a47, #4b2e7c);
  color: #ffffff;
  font-family: "Hiragino Mincho ProN", serif;
  text-align: center;
  padding: 30px;
  position: relative;
  overflow: hidden;
  min-height: 100vh;
}

body::after {
  content: '';
  position: absolute;
  top:0; left:0; width:100%; height:100%;
  background: radial-gradient(circle, rgba(255,255,255,0.05) 1px, transparent 1px);
  background-size: 20px 20px;
  pointer-events: none;
  animation: sparkle 10s linear infinite;
  z-index:0;
}
@keyframes sparkle { 0%{background-position:0 0;} 100%{background-position:100px 100px;} }

.container { max-width: 800px; margin:auto; position: relative; z-index:1; }

h1 { 
  font-family: 'Baloo 2', cursive; 
  font-size:56px; 
  margin-bottom:10px; 
  color:#ff77cc; 
  text-shadow: 2px 2px 8px #55297a;
}
p.description { font-size:16px; margin-bottom:30px; line-height:1.5; }
input[type=text] { padding:10px; font-size:16px; width:60%; border-radius:8px; border:none; margin-bottom:10px; }
.characteristics { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-bottom:20px; }
.characteristics label { background:#6b3e8c; padding:8px 12px; border-radius:6px; cursor:pointer; user-select:none; transition:0.2s; }
.characteristics input[type=checkbox] { margin-right:6px; transform:scale(1.1); }
.characteristics label:hover { background:#8251b5; }
select { padding:10px 12px; font-size:16px; border-radius:6px; border:none; margin-bottom:20px; }
button { margin-top:20px; padding:12px 24px; background:#ff99cc; color:#ffffff; font-weight:bold; border:none; border-radius:8px; cursor:pointer; font-size:16px; transition:0.2s; }
button:hover { background:#ffb3dd; }

.result { margin-top:30px; padding:25px; background:#3b1f58; border-radius:12px; text-align:left; line-height:1.6; }
.result h2 { text-align:center; color:#ff77cc; margin-bottom:15px; text-shadow: 1px 1px 5px #55297a; }
.result .info { display:flex; justify-content:space-around; flex-wrap:wrap; font-weight:bold; margin-bottom:15px; }
.result .info div { background:#55297a; padding:10px 15px; border-radius:8px; margin:5px; }
.result .phase { font-style:italic; color:#a0c4ff; }
.result .light { color:#a0ffb0; margin-top:12px; }
.result .dark { color:#ff8080; margin-top:8px; }
.result .share { display:block; margin-top:20px; text-align:center; background:#ff77cc; color:white; padding:10px 16px; border-radius:8px; text-decoration:none; font-weight:bold; transition:0.2s; }
.result .share:hover { background:#ff99cc; }

/* --- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– --- */
@media (max-width: 600px) {
  body { padding:15px; }
  h1 { font-size:36px; }
  p.description { font-size:14px; }
  input[type=text] { width:90%; font-size:16px; }
  button { width:80%; font-size:18px; padding:10px 0; }
  .characteristics label { font-size:14px; padding:6px 8px; }
  .result { padding:15px; font-size:14px; }
  .result .info { flex-direction:column; align-items:center; }
}
</style>
</head>
<body>
<div class="container">
<h1>ã‚­ãƒ£ãƒ©ãŸã‚“ï¼</h1>
<p class="description">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æ€§æ ¼ã¨åå‰ã‹ã‚‰èª•ç”Ÿæ—¥ãƒ»æ˜Ÿåº§ãƒ»å­£ç¯€å¿ƒç†ãƒ•ã‚§ãƒ¼ã‚ºã‚’å°ãå‡ºã™ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p>

<input type="text" id="name" placeholder="ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å"><br>

<p>æ€§æ ¼ã‚’3ã¤ä»¥ä¸Šé¸ã‚“ã§ãã ã•ã„</p>
<div class="characteristics">
<!-- ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¯å‰å›ã¨åŒã˜ -->
<label><input type="checkbox" value="è¡å‹•çš„">è¡å‹•çš„</label>
<label><input type="checkbox" value="æˆ¦ã„ã‚’æã‚Œãªã„">æˆ¦ã„ã‚’æã‚Œãªã„</label>
<label><input type="checkbox" value="é ‘å›º">é ‘å›º</label>
<label><input type="checkbox" value="å®ˆã‚‹ã¹ãã‚‚ã®ãŒã‚ã‚‹">å®ˆã‚‹ã¹ãã‚‚ã®ãŒã‚ã‚‹</label>
<label><input type="checkbox" value="äºŒé¢æ€§ãŒã‚ã‚‹">äºŒé¢æ€§ãŒã‚ã‚‹</label>
<label><input type="checkbox" value="æƒ…å ±é€š">æƒ…å ±é€š</label>
<label><input type="checkbox" value="ä»²é–“æ€ã„">ä»²é–“æ€ã„</label>
<label><input type="checkbox" value="å‚·ã¤ãã‚„ã™ã„">å‚·ã¤ãã‚„ã™ã„</label>
<label><input type="checkbox" value="èª‡ã‚Šé«˜ã„">èª‡ã‚Šé«˜ã„</label>
<label><input type="checkbox" value="æ³¨ç›®ã•ã‚ŒãŸã„">æ³¨ç›®ã•ã‚ŒãŸã„</label>
<label><input type="checkbox" value="å®Œç’§ä¸»ç¾©">å®Œç’§ä¸»ç¾©</label>
<label><input type="checkbox" value="åˆ†æå‹">åˆ†æå‹</label>
<label><input type="checkbox" value="ãƒãƒ©ãƒ³ã‚¹é‡è¦–">ãƒãƒ©ãƒ³ã‚¹é‡è¦–</label>
<label><input type="checkbox" value="å¹³å’Œä¸»ç¾©">å¹³å’Œä¸»ç¾©</label>
<label><input type="checkbox" value="åŸ·ç€å¿ƒãŒå¼·ã„">åŸ·ç€å¿ƒãŒå¼·ã„</label>
<label><input type="checkbox" value="ç§˜å¯†ã‚’æŠ±ãˆã¦ã„ã‚‹">ç§˜å¯†ã‚’æŠ±ãˆã¦ã„ã‚‹</label>
<label><input type="checkbox" value="è‡ªç”±å¥”æ”¾">è‡ªç”±å¥”æ”¾</label>
<label><input type="checkbox" value="ç†æƒ³ã‚’è¿½ã†">ç†æƒ³ã‚’è¿½ã†</label>
<label><input type="checkbox" value="è²¬ä»»æ„ŸãŒå¼·ã„">è²¬ä»»æ„ŸãŒå¼·ã„</label>
<label><input type="checkbox" value="é‡å¿ƒå®¶">é‡å¿ƒå®¶</label>
<label><input type="checkbox" value="å€‹æ€§çš„">å€‹æ€§çš„</label>
<label><input type="checkbox" value="é©æ–°çš„">é©æ–°çš„</label>
<label><input type="checkbox" value="å…±æ„ŸåŠ›ãŒé«˜ã„">å…±æ„ŸåŠ›ãŒé«˜ã„</label>
<label><input type="checkbox" value="è‡ªå·±çŠ ç‰²çš„">è‡ªå·±çŠ ç‰²çš„</label>
</div>

<p>ç”Ÿã¾ã‚Œã‚‹å­£ç¯€ã‚’é¸æŠï¼ˆã“ã ã‚ã‚‰ãªã„å ´åˆã¯ã€Œãªã—ã€ï¼‰</p>
<select id="season">
<option value="ãªã—">ãªã—</option>
<option value="æ˜¥">æ˜¥ï¼ˆ3ã€œ5æœˆï¼‰</option>
<option value="å¤">å¤ï¼ˆ6ã€œ8æœˆï¼‰</option>
<option value="ç§‹">ç§‹ï¼ˆ9ã€œ11æœˆï¼‰</option>
<option value="å†¬">å†¬ï¼ˆ12ã€œ2æœˆï¼‰</option>
</select>

<button onclick="diagnose()">èª•ç”Ÿæ—¥ã‚’å°ãå‡ºã™</button>
<div id="result" class="result"></div>
</div>

<script>
// --- æ˜Ÿåº§ãƒ‡ãƒ¼ã‚¿ã¨ãƒ­ã‚¸ãƒƒã‚¯ã¯å‰å›ã¨åŒã˜ ---
const zodiacData = {
aries:{name:"ç‰¡ç¾Šåº§",light:"é“ã‚’åˆ‡ã‚Šé–‹ãå…ˆå°è€…ã€‚",dark:"è¡å‹•ãŒå¤§åˆ‡ãªã‚‚ã®ã‚’å¤±ã‚ã›ã‚‹ã€‚"},
taurus:{name:"ç‰¡ç‰›åº§",light:"æºã‚‹ãŒã¬å®ˆè­·è€…ã€‚",dark:"åŸ·ç€ãŒå¤‰åŒ–ã‚’æ‹’ã‚€ã€‚"},
gemini:{name:"åŒå­åº§",light:"è¨€è‘‰ã¨çŸ¥è­˜ã®é­”è¡“å¸«ã€‚",dark:"æœ¬å¿ƒã‚’éš ã—ç¶šã‘ã‚‹ã€‚"},
cancer:{name:"èŸ¹åº§",light:"ä»²é–“ã‚’å®ˆã‚‹ç›¾ã€‚",dark:"å‚·ã¤ãã“ã¨ã‚’æã‚Œé–‰ã˜ã“ã‚‚ã‚‹ã€‚"},
leo:{name:"ç…å­åº§",light:"ç‹ã®è³‡è³ªã¨è¼ãã€‚",dark:"æ‰¿èªã•ã‚Œã¬å­¤ç‹¬ã€‚"},
virgo:{name:"ä¹™å¥³åº§",light:"ä¸–ç•Œã‚’æ•´ãˆã‚‹è¦³å¯Ÿè€…ã€‚",dark:"å®Œç’§ã‚’æ±‚ã‚è‡ªåˆ†ã‚’è¿½ã„è©°ã‚ã‚‹ã€‚"},
libra:{name:"å¤©ç§¤åº§",light:"å¯¾ç«‹ã‚’èª¿åœã™ã‚‹è€…ã€‚",dark:"æ±ºæ–­ã‚’æã‚Œã‚‹å„ªæŸ”ä¸æ–­ã€‚"},
scorpio:{name:"è åº§",light:"çœŸå®Ÿã‚’æš´ãæ·±æ·µã®ç³ã€‚",dark:"å¾©è®å¿ƒã«å›šã‚ã‚Œã‚‹ã€‚"},
sagittarius:{name:"å°„æ‰‹åº§",light:"æœªæ¥ã‚’å°„æŠœãç†æƒ³ä¸»ç¾©è€…ã€‚",dark:"ç¾å®Ÿã‹ã‚‰ç›®ã‚’é€¸ã‚‰ã™ã€‚"},
capricorn:{name:"å±±ç¾Šåº§",light:"é ‚ç‚¹ã‚’ç›®æŒ‡ã™åŠªåŠ›å®¶ã€‚",dark:"æˆåŠŸã®ãŸã‚ã«å¿ƒã‚’çŠ ç‰²ã«ã™ã‚‹ã€‚"},
aquarius:{name:"æ°´ç“¶åº§",light:"ä¸–ç•Œã‚’å¤‰ãˆã‚‹é©å‘½å®¶ã€‚",dark:"ç†è§£ã•ã‚Œãªã„å­¤ç«‹ã€‚"},
pisces:{name:"é­šåº§",light:"é­‚ã‚’ç™’ã™å…±é³´è€…ã€‚",dark:"ä»–äººã«å‘‘ã¿è¾¼ã¾ã‚Œã‚‹ã€‚"}
};

const zodiacDates = {
aries:["3æœˆ21æ—¥","4æœˆ19æ—¥"], taurus:["4æœˆ20æ—¥","5æœˆ20"], gemini:["5æœˆ21æ—¥","6æœˆ21"],
cancer:["6æœˆ22æ—¥","7æœˆ22"], leo:["7æœˆ23æ—¥","8æœˆ22"], virgo:["8æœˆ23æ—¥","9æœˆ22"],
libra:["9æœˆ23æ—¥","10æœˆ23"], scorpio:["10æœˆ24æ—¥","11æœˆ22"], sagittarius:["11æœˆ23æ—¥","12æœˆ21"],
capricorn:["12æœˆ22æ—¥","1æœˆ19"], aquarius:["1æœˆ20","2æœˆ18"], pisces:["2æœˆ19","3æœˆ20"]
};

const seasons = { "æ˜¥":[3,4,5], "å¤":[6,7,8], "ç§‹":[9,10,11], "å†¬":[12,1,2], "ãªã—":[] };
const phases = [
{phase:"æ—©æ˜¥",range:[{month:2,day:19},{month:3,day:20}]},
{phase:"æ˜¥ç››",range:[{month:3,day:21},{month:5,day:15}]},
{phase:"åˆå¤",range:[{month:5,day:16},{month:6,day:21}]},
{phase:"ç››å¤",range:[{month:6,day:22},{month:8,day:22}]},
{phase:"åˆç§‹",range:[{month:8,day:23},{month:9,day:30}]},
{phase:"ç§‹æ·±",range:[{month:10,day:1},{month:11,day:22}]},
{phase:"æ™©ç§‹ã€œåˆå†¬",range:[{month:11,day:23},{month:12,day:21}]},
{phase:"å†¬æ¥µ",range:[{month:12,day:22},{month:2,day:18}]}
];

function assignBirthdayByName(name){
  const daysInMonth = [31,29,31,30,31,30,31,31,30,31,30,31];
  let month = (name.length % 12) + 1;
  let points = 0;
  for(let ch of name){
    if(ch.match(/[\u3040-\u309F]/)) points+=1;
    else if(ch.match(/[\u30A0-\u30FF]/)) points+=2;
    else if(ch.match(/[\u4E00-\u9FFF]/)) points+=3;
  }
  let day = (points % daysInMonth[month-1]) + 1;
  return {month, day};
}

function getZodiacFromDate(month, day){
  for(let z in zodiacDates){
    let start = zodiacDates[z][0].match(/\d+/g).map(Number);
    let end   = zodiacDates[z][1].match(/\d+/g).map(Number);
    let sMonth = start[0], sDay = start[1];
    let eMonth = end[0], eDay = end[1];
    if(sMonth < eMonth || (sMonth===eMonth && sDay<=eDay)){
      if((month>sMonth || (month===sMonth && day>=sDay)) && (month<eMonth || (month===eMonth && day<=eDay))){
        return z;
      }
    } else {
      if((month>sMonth || (month===sMonth && day>=sDay)) || (month<eMonth || (month===eMonth && day<=eDay))){
        return z;
      }
    }
  }
  return "aries";
}

function adjustMonthBySeason(month, seasonSelected){
  if(seasonSelected==="ãªã—") return month;
  const seasonMonths = seasons[seasonSelected];
  if(!seasonMonths.includes(month)){
    return seasonMonths[Math.floor(Math.random()*seasonMonths.length)];
  }
  return month;
}

function getPhase(month,day){
  for(let i=0;i<phases.length;i++){
    let r=phases[i].range;
    if((month>r[0].month || (month===r[0].month && day>=r[0].day)) &&
       (month<r[1].month || (month===r[1].month && day<=r[1].day))){
      return phases[i].phase;
    }
    if(phases[i].phase==="å†¬æ¥µ" &&
       ((month===12 && day>=22)||(month===1)||(month===2 && day<=18))){
      return "å†¬æ¥µ";
    }
  }
  return "";
}

function diagnose(){
  const name=document.getElementById("name").value||"åã‚‚ãªãè€…";
  const checks=document.querySelectorAll("input[type=checkbox]:checked");
  if(checks.length<1){alert("æ€§æ ¼ã‚’é¸ã‚“ã§ãã ã•ã„");return;}
  const seasonSelected = document.getElementById("season").value;

  let {month,day} = assignBirthdayByName(name);
  month = adjustMonthBySeason(month, seasonSelected);
  const zodiac = getZodiacFromDate(month, day);
  const phase = getPhase(month,day);
  const birthdayStr = `${month}æœˆ${day}æ—¥`;

  const siteUrl = "https://github.com/star-creater-bonbon/github.io/blob/main/index.html"; // â†æœ¬ç•ªURLã«å¤‰æ›´
  const tweetText = `${name}ã¯${birthdayStr}ç”Ÿã¾ã‚Œã®${zodiacData[zodiac].name}(${phase})ã€‚å…‰ã¨é—‡ã‚’ä½µã›æŒã¤å­˜åœ¨ã€‚`;
  const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText + " " + siteUrl)}`;

  document.getElementById("result").innerHTML=`
    <h2>${name} ã®èª•ç”Ÿæ—¥è¨ºæ–­</h2>
    <div class="info">
      <div>èª•ç”Ÿæ—¥: <strong>${birthdayStr}</strong></div>
      <div>æ˜Ÿåº§: <strong>${zodiacData[zodiac].name}</strong></div>
      <div class="phase">å­£ç¯€å¿ƒç†: <strong>${phase}</strong></div>
    </div>
    <p class="light">ğŸŒã€å…‰ã€‘${zodiacData[zodiac].light}</p>
    <p class="dark">ğŸŒ‘ã€é—‡ã€‘${zodiacData[zodiac].dark}</p>
    <a class="share" href="${shareUrl}" target="_blank">Xã§ã‚·ã‚§ã‚¢</a>
  `;
}
</script>
</body>
</html>

