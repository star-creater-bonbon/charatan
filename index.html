<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚­ãƒ£ãƒ©ãŸã‚“ï¼â€•â€•èª•ç”Ÿæ—¥è¨ºæ–­â€•â€•</title>
<style>
body {
  background: linear-gradient(135deg, #0f1020, #1b1e3a);
  color: #f0f0f0;
  font-family: "Hiragino Mincho ProN", serif;
  text-align: center;
  padding: 30px;
}
.container { max-width: 800px; margin:auto; }
h1 { font-size:48px; margin-bottom:10px; color:#ffdd99; }
p.description { font-size:16px; margin-bottom:30px; line-height:1.5; }
input[type=text] { padding:10px; font-size:16px; width:60%; border-radius:8px; border:none; margin-bottom:10px; }
.characteristics { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-bottom:20px; }
.characteristics label { background:#2c2f4a; padding:8px 12px; border-radius:6px; cursor:pointer; user-select:none; transition:0.2s; }
.characteristics input[type=checkbox] { margin-right:6px; transform:scale(1.1); }
.characteristics label:hover { background:#3a3f6c; }
select { padding:10px 12px; font-size:16px; border-radius:6px; border:none; margin-bottom:20px; }
button { margin-top:20px; padding:12px 24px; background:#ff9933; color:#0f1020; font-weight:bold; border:none; border-radius:8px; cursor:pointer; font-size:16px; transition:0.2s; }
button:hover { background:#ffaa44; }
.result { margin-top:30px; padding:25px; background:#1a1d33; border-radius:12px; text-align:left; line-height:1.6; }
.result h2 { text-align:center; color:#ffdd99; margin-bottom:15px; }
.result .info { display:flex; justify-content:space-around; flex-wrap:wrap; font-weight:bold; margin-bottom:15px; }
.result .info div { background:#2c2f4a; padding:10px 15px; border-radius:8px; margin:5px; }
.result .phase { font-style:italic; color:#a0c4ff; }
.result .light { color:#a0ffb0; margin-top:12px; }
.result .dark { color:#ff8080; margin-top:8px; }
.result .share { display:block; margin-top:20px; text-align:center; background:#1e90ff; color:white; padding:10px 16px; border-radius:8px; text-decoration:none; font-weight:bold; transition:0.2s; }
.result .share:hover { background:#3399ff; }
</style>
</head>
<body>
<div class="container">
<h1>ã‚­ãƒ£ãƒ©ãŸã‚“ï¼</h1>
<p class="description">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æ€§æ ¼ã¨åå‰ã‹ã‚‰èª•ç”Ÿæ—¥ãƒ»æ˜Ÿåº§ãƒ»å­£ç¯€å¿ƒç†ãƒ•ã‚§ãƒ¼ã‚ºã‚’å°ãå‡ºã™ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p>

<input type="text" id="name" placeholder="ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å"><br>

<p>æ€§æ ¼ã‚’3ã¤ä»¥ä¸Šé¸ã‚“ã§ãã ã•ã„</p>
<div class="characteristics">
<label><input type="checkbox" value="è¡å‹•çš„">è¡å‹•çš„</label>
<label><input type="checkbox" value="æˆ¦ã„ã‚’æã‚Œãªã„">æˆ¦ã„ã‚’æã‚Œãªã„</label>
<label><input type="checkbox" value="é ‘å›º">é ‘å›º</label>
<label><input type="checkbox" value="å®ˆã‚‹ã¹ãã‚‚ã®ãŒã‚ã‚‹">å®ˆã‚‹ã¹ãã‚‚ã®ãŒã‚ã‚‹</label>
<label><input type="checkbox" value="äºŒé¢æ€§ãŒã‚ã‚‹">äºŒé¢æ€§ãŒã‚ã‚‹</label>
<label><input type="checkbox" value="æƒ…å ±é€š">æƒ…å ±é€š</label>
<label><input type="checkbox" value="ä»²é–“æ€ã„">ä»²é–“æ€ã„</label>
<label><input type="checkbox" value="å‚·ã¤ãã‚„ã™ã„">å‚·ã¤ãã‚„ã™ã„</label>
<label><input type="checkbox" value="èª‡ã‚Šé«˜ã„">èª‡ã‚Šé«˜ã„</label>
<label><input type="checkbox" value="æ³¨ç›®ã•ã‚ŒãŸã„">æ³¨ç›®ã•ã‚ŒãŸã„</label>
<label><input type="checkbox" value="å®Œç’§ä¸»ç¾©">å®Œç’§ä¸»ç¾©</label>
<label><input type="checkbox" value="åˆ†æå‹">åˆ†æå‹</label>
<label><input type="checkbox" value="ãƒãƒ©ãƒ³ã‚¹é‡è¦–">ãƒãƒ©ãƒ³ã‚¹é‡è¦–</label>
<label><input type="checkbox" value="å¹³å’Œä¸»ç¾©">å¹³å’Œä¸»ç¾©</label>
<label><input type="checkbox" value="åŸ·ç€å¿ƒãŒå¼·ã„">åŸ·ç€å¿ƒãŒå¼·ã„</label>
<label><input type="checkbox" value="ç§˜å¯†ã‚’æŠ±ãˆã¦ã„ã‚‹">ç§˜å¯†ã‚’æŠ±ãˆã¦ã„ã‚‹</label>
<label><input type="checkbox" value="è‡ªç”±å¥”æ”¾">è‡ªç”±å¥”æ”¾</label>
<label><input type="checkbox" value="ç†æƒ³ã‚’è¿½ã†">ç†æƒ³ã‚’è¿½ã†</label>
<label><input type="checkbox" value="è²¬ä»»æ„ŸãŒå¼·ã„">è²¬ä»»æ„ŸãŒå¼·ã„</label>
<label><input type="checkbox" value="é‡å¿ƒå®¶">é‡å¿ƒå®¶</label>
<label><input type="checkbox" value="å€‹æ€§çš„">å€‹æ€§çš„</label>
<label><input type="checkbox" value="é©æ–°çš„">é©æ–°çš„</label>
<label><input type="checkbox" value="å…±æ„ŸåŠ›ãŒé«˜ã„">å…±æ„ŸåŠ›ãŒé«˜ã„</label>
<label><input type="checkbox" value="è‡ªå·±çŠ ç‰²çš„">è‡ªå·±çŠ ç‰²çš„</label>
</div>

<p>ç”Ÿã¾ã‚Œã‚‹å­£ç¯€ã‚’é¸æŠï¼ˆã“ã ã‚ã‚‰ãªã„å ´åˆã¯ã€Œãªã—ã€ï¼‰</p>
<select id="season">
<option value="ãªã—">ãªã—</option>
<option value="æ˜¥">æ˜¥ï¼ˆ3ã€œ5æœˆï¼‰</option>
<option value="å¤">å¤ï¼ˆ6ã€œ8æœˆï¼‰</option>
<option value="ç§‹">ç§‹ï¼ˆ9ã€œ11æœˆï¼‰</option>
<option value="å†¬">å†¬ï¼ˆ12ã€œ2æœˆï¼‰</option>
</select>

<button onclick="diagnose()">èª•ç”Ÿæ—¥ã‚’å°ãå‡ºã™</button>
<div id="result" class="result"></div>
</div>

<script>
const zodiacData = {
aries:{name:"ç‰¡ç¾Šåº§",light:"é“ã‚’åˆ‡ã‚Šé–‹ãå…ˆå°è€…ã€‚",dark:"è¡å‹•ãŒå¤§åˆ‡ãªã‚‚ã®ã‚’å¤±ã‚ã›ã‚‹ã€‚"},
taurus:{name:"ç‰¡ç‰›åº§",light:"æºã‚‹ãŒã¬å®ˆè­·è€…ã€‚",dark:"åŸ·ç€ãŒå¤‰åŒ–ã‚’æ‹’ã‚€ã€‚"},
gemini:{name:"åŒå­åº§",light:"è¨€è‘‰ã¨çŸ¥è­˜ã®é­”è¡“å¸«ã€‚",dark:"æœ¬å¿ƒã‚’éš ã—ç¶šã‘ã‚‹ã€‚"},
cancer:{name:"èŸ¹åº§",light:"ä»²é–“ã‚’å®ˆã‚‹ç›¾ã€‚",dark:"å‚·ã¤ãã“ã¨ã‚’æã‚Œé–‰ã˜ã“ã‚‚ã‚‹ã€‚"},
leo:{name:"ç…å­åº§",light:"ç‹ã®è³‡è³ªã¨è¼ãã€‚",dark:"æ‰¿èªã•ã‚Œã¬å­¤ç‹¬ã€‚"},
virgo:{name:"ä¹™å¥³åº§",light:"ä¸–ç•Œã‚’æ•´ãˆã‚‹è¦³å¯Ÿè€…ã€‚",dark:"å®Œç’§ã‚’æ±‚ã‚è‡ªåˆ†ã‚’è¿½ã„è©°ã‚ã‚‹ã€‚"},
libra:{name:"å¤©ç§¤åº§",light:"å¯¾ç«‹ã‚’èª¿åœã™ã‚‹è€…ã€‚",dark:"æ±ºæ–­ã‚’æã‚Œã‚‹å„ªæŸ”ä¸æ–­ã€‚"},
scorpio:{name:"è åº§",light:"çœŸå®Ÿã‚’æš´ãæ·±æ·µã®ç³ã€‚",dark:"å¾©è®å¿ƒã«å›šã‚ã‚Œã‚‹ã€‚"},
sagittarius:{name:"å°„æ‰‹åº§",light:"æœªæ¥ã‚’å°„æŠœãç†æƒ³ä¸»ç¾©è€…ã€‚",dark:"ç¾å®Ÿã‹ã‚‰ç›®ã‚’é€¸ã‚‰ã™ã€‚"},
capricorn:{name:"å±±ç¾Šåº§",light:"é ‚ç‚¹ã‚’ç›®æŒ‡ã™åŠªåŠ›å®¶ã€‚",dark:"æˆåŠŸã®ãŸã‚ã«å¿ƒã‚’çŠ ç‰²ã«ã™ã‚‹ã€‚"},
aquarius:{name:"æ°´ç“¶åº§",light:"ä¸–ç•Œã‚’å¤‰ãˆã‚‹é©å‘½å®¶ã€‚",dark:"ç†è§£ã•ã‚Œãªã„å­¤ç«‹ã€‚"},
pisces:{name:"é­šåº§",light:"é­‚ã‚’ç™’ã™å…±é³´è€…ã€‚",dark:"ä»–äººã«å‘‘ã¿è¾¼ã¾ã‚Œã‚‹ã€‚"}
};

const zodiacDates = {
aries:["3æœˆ21æ—¥","4æœˆ19æ—¥"], taurus:["4æœˆ20æ—¥","5æœˆ20"], gemini:["5æœˆ21æ—¥","6æœˆ21æ—¥"],
cancer:["6æœˆ22æ—¥","7æœˆ22æ—¥"], leo:["7æœˆ23æ—¥","8æœˆ22æ—¥"], virgo:["8æœˆ23æ—¥","9æœˆ22æ—¥"],
libra:["9æœˆ23æ—¥","10æœˆ23æ—¥"], scorpio:["10æœˆ24æ—¥","11æœˆ22æ—¥"], sagittarius:["11æœˆ23æ—¥","12æœˆ21æ—¥"],
capricorn:["12æœˆ22æ—¥","1æœˆ19æ—¥"], aquarius:["1æœˆ20æ—¥","2æœˆ18æ—¥"], pisces:["2æœˆ19æ—¥","3æœˆ20æ—¥"]
};

// æ€§æ ¼ãƒã‚¤ãƒ³ãƒˆãƒãƒƒãƒ—
const personalityMap = {
"è¡å‹•çš„": {aries:3, leo:1, sagittarius:2}, "æˆ¦ã„ã‚’æã‚Œãªã„": {aries:2, leo:3},
"é ‘å›º": {taurus:3, capricorn:1}, "å®ˆã‚‹ã¹ãã‚‚ã®ãŒã‚ã‚‹": {taurus:2, cancer:1},
"äºŒé¢æ€§ãŒã‚ã‚‹": {gemini:3, libra:1}, "æƒ…å ±é€š": {gemini:2, aquarius:1},
"ä»²é–“æ€ã„": {cancer:3, pisces:1}, "å‚·ã¤ãã‚„ã™ã„": {cancer:2, pisces:2},
"èª‡ã‚Šé«˜ã„": {leo:3, aries:1}, "æ³¨ç›®ã•ã‚ŒãŸã„": {leo:2, sagittarius:1},
"å®Œç’§ä¸»ç¾©": {virgo:3, capricorn:1}, "åˆ†æå‹": {virgo:2, aquarius:1},
"ãƒãƒ©ãƒ³ã‚¹é‡è¦–": {libra:3, gemini:1}, "å¹³å’Œä¸»ç¾©": {libra:2, pisces:1},
"åŸ·ç€å¿ƒãŒå¼·ã„": {scorpio:3, capricorn:1}, "ç§˜å¯†ã‚’æŠ±ãˆã¦ã„ã‚‹": {scorpio:2, pisces:1},
"è‡ªç”±å¥”æ”¾": {sagittarius:3, aries:1}, "ç†æƒ³ã‚’è¿½ã†": {sagittarius:2, leo:1},
"è²¬ä»»æ„ŸãŒå¼·ã„": {capricorn:3, taurus:1}, "é‡å¿ƒå®¶": {capricorn:2, leo:1},
"å€‹æ€§çš„": {aquarius:3, gemini:1}, "é©æ–°çš„": {aquarius:2, aries:1},
"å…±æ„ŸåŠ›ãŒé«˜ã„": {pisces:3, cancer:1}, "è‡ªå·±çŠ ç‰²çš„": {pisces:2, cancer:1}
};

// å­£ç¯€ãƒãƒƒãƒ—
const seasons = { "æ˜¥":[3,4,5], "å¤":[6,7,8], "ç§‹":[9,10,11], "å†¬":[12,1,2], "ãªã—":[] };

// å­£ç¯€å¿ƒç†ãƒ•ã‚§ãƒ¼ã‚º
const phases = [
{phase:"æ—©æ˜¥",range:[{month:2,day:19},{month:3,day:20}]},
{phase:"æ˜¥ç››",range:[{month:3,day:21},{month:5,day:15}]},
{phase:"åˆå¤",range:[{month:5,day:16},{month:6,day:21}]},
{phase:"ç››å¤",range:[{month:6,day:22},{month:8,day:22}]},
{phase:"åˆç§‹",range:[{month:8,day:23},{month:9,day:30}]},
{phase:"ç§‹æ·±",range:[{month:10,day:1},{month:11,day:22}]},
{phase:"æ™©ç§‹ã€œåˆå†¬",range:[{month:11,day:23},{month:12,day:21}]},
{phase:"å†¬æ¥µ",range:[{month:12,day:22},{month:2,day:18}]}
];

// åå‰æ ¹æ‹ ã§æœˆæ—¥ã‚’å‰²ã‚Šå½“ã¦
function assignBirthdayByName(name){
  const daysInMonth = [31,29,31,30,31,30,31,31,30,31,30,31];
  let month = (name.length % 12) + 1;
  let points = 0;
  for(let ch of name){
    if(ch.match(/[\u3040-\u309F]/)) points+=1;
    else if(ch.match(/[\u30A0-\u30FF]/)) points+=2;
    else if(ch.match(/[\u4E00-\u9FFF]/)) points+=3;
  }
  let day = (points % daysInMonth[month-1]) + 1;
  return {month, day};
}

// æ€§æ ¼â†’æ˜Ÿåº§ãƒã‚¤ãƒ³ãƒˆåˆç®—
function calculateZodiacFromPersonality(selected){
  let totalPoints = {};
  selected.forEach(p=>{
    if(personalityMap[p]){
      for(let z in personalityMap[p]){
        totalPoints[z] = (totalPoints[z]||0) + personalityMap[p][z];
      }
    }
  });
  let max = Object.keys(totalPoints).reduce((a,b)=> totalPoints[a]>=totalPoints[b]?a:b);
  return max;
}

// å­£ç¯€èª¿æ•´
function adjustMonthBySeason(month, seasonSelected){
  if(seasonSelected==="ãªã—") return month;
  const seasonMonths = seasons[seasonSelected];
  if(!seasonMonths.includes(month)){
    return seasonMonths[Math.floor(Math.random()*seasonMonths.length)];
  }
  return month;
}

// å­£ç¯€å¿ƒç†ãƒ•ã‚§ãƒ¼ã‚ºåˆ¤å®š
function getPhase(month,day){
  for(let i=0;i<phases.length;i++){
    let r=phases[i].range;
    if((month>r[0].month || (month===r[0].month && day>=r[0].day)) &&
       (month<r[1].month || (month===r[1].month && day<=r[1].day))){
      return phases[i].phase;
    }
    if(phases[i].phase==="å†¬æ¥µ" &&
       ((month===12 && day>=22)||(month===1)||(month===2 && day<=18))){
      return "å†¬æ¥µ";
    }
  }
  return "";
}

function diagnose(){
  const name=document.getElementById("name").value||"åã‚‚ãªãè€…";
  const checks=document.querySelectorAll("input[type=checkbox]:checked");
  if(checks.length<1){alert("æ€§æ ¼ã‚’é¸ã‚“ã§ãã ã•ã„");return;}
  const seasonSelected = document.getElementById("season").value;

  const zodiac = calculateZodiacFromPersonality(Array.from(checks).map(c=>c.value));
  let {month,day} = assignBirthdayByName(name);
  month = adjustMonthBySeason(month, seasonSelected);

  const phase = getPhase(month,day);
  const birthdayStr = `${month}æœˆ${day}æ—¥`;

  document.getElementById("result").innerHTML=`
    <h2>${name} ã®èª•ç”Ÿæ—¥è¨ºæ–­</h2>
    <div class="info">
      <div>èª•ç”Ÿæ—¥: <strong>${birthdayStr}</strong></div>
      <div>æ˜Ÿåº§: <strong>${zodiacData[zodiac].name}</strong></div>
      <div class="phase">å­£ç¯€å¿ƒç†: <strong>${phase}</strong></div>
    </div>
    <p class="light">ğŸŒã€å…‰ã€‘${zodiacData[zodiac].light}</p>
    <p class="dark">ğŸŒ‘ã€é—‡ã€‘${zodiacData[zodiac].dark}</p>
    <a class="share" href="https://twitter.com/intent/tweet?text=${encodeURIComponent(name+"ã¯"+birthdayStr+"ç”Ÿã¾ã‚Œã®"+zodiacData[zodiac].name+"("+phase+")ã€‚å…‰ã¨é—‡ã‚’ä½µã›æŒã¤å­˜åœ¨ã€‚")}" target="_blank">Xã§ã‚·ã‚§ã‚¢</a>
  `;
}
</script>
</body>
</html>

